  1          OPTIONS NONOTES NOSTIMER NOSOURCE NOSYNTAXCHECK; 72          73         data temp_c; 74          set mylib.recs; 75          if (TEMPNITE ~= -2)&&(TEMPHOME ~= -2)&&(TEMPGONE ~= -2); 76          keep DOEID DIVISION TEMPNITE TEMPHOME TEMPGONE NWEIGHT; 77         run;  NOTE: There were 5686 observations read from the data set MYLIB.RECS. NOTE: The data set WORK.TEMP_C has 5428 observations and 6 variables. NOTE: DATA statement used (Total process time):       real time           0.01 seconds       cpu time            0.02 seconds         78          79         /* need to eliminate the NA data repl */ 80         data brrwt_long_c; 81          set mylib.recs; 82          if (TEMPNITE ~= -2)&&(TEMPHOME ~= -2)&&(TEMPGONE ~= -2); 83          keep DOEID DIVISION BRRWT1-BRRWT96; 84         run;  NOTE: There were 5686 observations read from the data set MYLIB.RECS. NOTE: The data set WORK.BRRWT_LONG_C has 5428 observations and 98 variables. NOTE: DATA statement used (Total process time):       real time           0.02 seconds       cpu time            0.02 seconds         85          86         proc transpose data=brrwt_long_c 87            out=brrwt_long_c; 88            var BRRWT1-BRRWT96 ; 89            by DOEID DIVISION; 90         run;  NOTE: There were 5428 observations read from the data set WORK.BRRWT_LONG_C. NOTE: The data set WORK.BRRWT_LONG_C has 521088 observations and 4 variables. NOTE: PROCEDURE TRANSPOSE used (Total process time):       real time           0.08 seconds       cpu time            0.08 seconds         91          92         data brrwt_long_c; 93          set brrwt_long_c; 94          repl = _NAME_; 95          wt = COL1; 96          keep DOEID DIVISION repl wt; 97         run;  NOTE: There were 521088 observations read from the data set WORK.BRRWT_LONG_C. NOTE: The data set WORK.BRRWT_LONG_C has 521088 observations and 4 variables. NOTE: DATA statement used (Total process time):       real time           0.09 seconds       cpu time            0.10 seconds         98          99         /* Join home type to weights: -------------------------------------------------- */ 100        data temp_c; 101         merge temp_c brrwt_long_c; 102         by DOEID; 103         night_temp_est=TEMPNITE*NWEIGHT; 104         night_temp_repl=TEMPNITE*wt; 105         home_temp_est=TEMPHOME*NWEIGHT; 106         home_temp_repl=TEMPHOME*wt; 107         gone_temp_est=TEMPGONE*NWEIGHT; 108         gone_temp_repl=TEMPGONE*wt; 109        run;  NOTE: There were 5428 observations read from the data set WORK.TEMP_C. NOTE: There were 521088 observations read from the data set WORK.BRRWT_LONG_C. NOTE: The data set WORK.TEMP_C has 521088 observations and 14 variables. NOTE: DATA statement used (Total process time):       real time           0.21 seconds       cpu time            0.22 seconds         110         111        proc summary data=temp_c; 112         class DIVISION repl; 113         output out=temp_sum_c 114         sum(night_temp_est) = sum_night_temp_est 115         sum(wt) = sum_wt_repl 116         sum(night_temp_repl) = sum_night_temp_repl 117         sum(NWEIGHT) = sum_nwt 118         sum(home_temp_est) = sum_home_temp_est 119         sum(home_temp_repl) = sum_home_temp_repl 120         sum(gone_temp_est) = sum_gone_temp_est 121         sum(gone_temp_repl) = sum_gone_temp_repl; 122        run;  NOTE: There were 521088 observations read from the data set WORK.TEMP_C. NOTE: The data set WORK.TEMP_SUM_C has 1067 observations and 12 variables. NOTE: PROCEDURE SUMMARY used (Total process time):       real time           0.12 seconds       cpu time            0.21 seconds         123         124        /* calc estimation and sse */ 125        data temp_c; 126         set temp_sum_c; 127         if (_TYPE_ = 3); 128         night_temp_est=sum_night_temp_est/sum_nwt; 129         night_temp_repl=sum_night_temp_repl/sum_wt_repl; 130         home_temp_est=sum_home_temp_est/sum_nwt; 131         home_temp_repl=sum_home_temp_repl/sum_wt_repl; 132         gone_temp_est=sum_gone_temp_est/sum_nwt; 133         gone_temp_repl=sum_gone_temp_repl/sum_wt_repl; 134         std_err_night = (4*(night_temp_est-night_temp_repl)**2)**0.5; 135         std_err_home = (4*(home_temp_est-home_temp_repl)**2)**0.5; 136         std_err_gone = (4*(gone_temp_est-gone_temp_repl)**2)**0.5; 137        run;  NOTE: There were 1067 observations read from the data set WORK.TEMP_SUM_C. NOTE: The data set WORK.TEMP_C has 960 observations and 21 variables. NOTE: DATA statement used (Total process time):       real time           0.01 seconds       cpu time            0.01 seconds         138         139        /* average the error */ 140        proc summary data=temp_c; 141         class DIVISION; 142         output out=temp_c 143         mean(night_temp_est) = night_temp_est 144         mean(std_err_night) = std_err_night 145         mean(home_temp_est) = home_temp_est 146         mean(std_err_home) = std_err_home 147         mean(gone_temp_est) = gone_temp_est 148         mean(std_err_gone) = std_err_gone; 149        run;  NOTE: There were 960 observations read from the data set WORK.TEMP_C. NOTE: The data set WORK.TEMP_C has 11 observations and 9 variables. NOTE: PROCEDURE SUMMARY used (Total process time):       real time           0.00 seconds       cpu time            0.01 seconds         150         151        /* calc CI */ 152        data temp_c; 153         set temp_c; 154         night_lwr = night_temp_est + quantile('NORMAL',0.025)*std_err_night; 155         night_upr = night_temp_est + quantile('NORMAL',0.975)*std_err_night; 156         home_lwr = home_temp_est + quantile('NORMAL',0.025)*std_err_home; 157         home_upr = home_temp_est + quantile('NORMAL',0.975)*std_err_home; 158         gone_lwr = gone_temp_est + quantile('NORMAL',0.025)*std_err_gone; 159         gone_upr = gone_temp_est + quantile('NORMAL',0.975)*std_err_gone; 160         if (_TYPE_ ~= 0); 161         drop _TYPE_ _FREQ_; 162        run;  NOTE: There were 11 observations read from the data set WORK.TEMP_C. NOTE: The data set WORK.TEMP_C has 10 observations and 13 variables. NOTE: DATA statement used (Total process time):       real time           0.00 seconds       cpu time            0.00 seconds         163         164        /* decoding the division code */ 165        data names; 166        input DIVISION names$; 167        cards;  NOTE: The data set WORK.NAMES has 10 observations and 2 variables. NOTE: DATA statement used (Total process time):       real time           0.00 seconds       cpu time            0.00 seconds         178        ; 179         180        data temp_c; 181         merge names temp_c; 182         by DIVISION; 183         drop DIVISION; 184         rename names=DIVISION; 185        run;  NOTE: There were 10 observations read from the data set WORK.NAMES. NOTE: There were 10 observations read from the data set WORK.TEMP_C. NOTE: The data set WORK.TEMP_C has 10 observations and 13 variables. NOTE: DATA statement used (Total process time):       real time           0.00 seconds       cpu time            0.01 seconds         186         187        proc print data=temp_c; 188         title 'national average home temperature by census division'; 189        run;  NOTE: There were 10 observations read from the data set WORK.TEMP_C. NOTE: PROCEDURE PRINT used (Total process time):       real time           0.07 seconds       cpu time            0.07 seconds         190         191        proc export data=temp_c 192         outfile='/folders/myfolders/Problem Set 6/ps6_q2c.csv' replace; 193        run;  NOTE: Unable to open parameter catalog: SASUSER.PARMS.PARMS.SLIST in update mode. Temporary parameter values will be saved to  WORK.PARMS.PARMS.SLIST. 194         /********************************************************************** 195         *   PRODUCT:   SAS 196         *   VERSION:   9.4 197         *   CREATOR:   External File Interface 198         *   DATE:      10DEC19 199         *   DESC:      Generated SAS Datastep Code 200         *   TEMPLATE SOURCE:  (None Specified.) 201         ***********************************************************************/ 202            data _null_; 203            %let _EFIERR_ = 0; /* set the ERROR detection macro variable */ 204            %let _EFIREC_ = 0;     /* clear export record count macro variable */ 205            file '/folders/myfolders/Problem Set 6/ps6_q2c.csv' delimiter=',' DSD DROPOVER lrecl=32767; 206            if _n_ = 1 then        /* write column names or labels */ 207             do; 208               put 209                  "DIVISION" 210               ',' 211                  "night_temp_est" 212               ',' 213                  "std_err_night" 214               ',' 215                  "home_temp_est" 216               ',' 217                  "std_err_home" 218               ',' 219                  "gone_temp_est" 220               ',' 221                  "std_err_gone" 222               ',' 223                  "night_lwr" 224               ',' 225                  "night_upr" 226               ',' 227                  "home_lwr" 228               ',' 229                  "home_upr" 230               ',' 231                  "gone_lwr" 232               ',' 233                  "gone_upr" 234               ; 235             end; 236           set  TEMP_C   end=EFIEOD; 237               format DIVISION $8. ; 238               format night_temp_est best12. ; 239               format std_err_night best12. ; 240               format home_temp_est best12. ; 241               format std_err_home best12. ; 242               format gone_temp_est best12. ; 243               format std_err_gone best12. ; 244               format night_lwr best12. ; 245               format night_upr best12. ; 246               format home_lwr best12. ; 247               format home_upr best12. ; 248               format gone_lwr best12. ; 249               format gone_upr best12. ; 250             do; 251               EFIOUT + 1; 252               put DIVISION $ @; 253               put night_temp_est @; 254               put std_err_night @; 255               put home_temp_est @; 256               put std_err_home @; 257               put gone_temp_est @; 258               put std_err_gone @; 259               put night_lwr @; 260               put night_upr @; 261               put home_lwr @; 262               put home_upr @; 263               put gone_lwr @; 264               put gone_upr ; 265               ; 266             end; 267            if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */ 268            if EFIEOD then call symputx('_EFIREC_',EFIOUT); 269            run;  NOTE: The file '/folders/myfolders/Problem Set 6/ps6_q2c.csv' is:       Filename=/folders/myfolders/Problem Set 6/ps6_q2c.csv,       Owner Name=sasdemo,Group Name=sas,       Access Permission=-rw-rw-r--,       Last Modified=10Dec2019:17:00:41  NOTE: 11 records were written to the file '/folders/myfolders/Problem Set 6/ps6_q2c.csv'.       The minimum record length was 147.       The maximum record length was 164. NOTE: There were 10 observations read from the data set WORK.TEMP_C. NOTE: DATA statement used (Total process time):       real time           0.00 seconds       cpu time            0.00 seconds         10 records created in /folders/myfolders/Problem Set 6/ps6_q2c.csv from TEMP_C.       NOTE: "/folders/myfolders/Problem Set 6/ps6_q2c.csv" file was successfully created. NOTE: PROCEDURE EXPORT used (Total process time):       real time           0.03 seconds       cpu time            0.04 seconds         270         271        OPTIONS NONOTES NOSTIMER NOSOURCE NOSYNTAXCHECK; 283        