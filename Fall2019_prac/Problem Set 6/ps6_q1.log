 
 1          OPTIONS NONOTES NOSTIMER NOSOURCE NOSYNTAXCHECK;
 NOTE: ODS statements in the SAS Studio environment may disable some output features.
 73         
 74         /* -------------------------------------------------------------------------- *
 75          * Stats 506 Problem Set 6 Question 1.
 76          *
 77          * This file imports RECS data from:
 78          *   ./mousetrap_data.csv
 79          *   Which is the output from PS 2 Q2 d
 80          *
 81          * Author: Sijun Zhang 89934761
 82          * Updated: Dec 8, 2019
 83          * -------------------------------------------------------------------------- *
 84         */
 85         /* 80: ---------------------------------------------------------------------- */
 86         /* data library for reading/writing data: ----------------------------------- */
 87         libname mylib '/folders/myfolders/Problem Set 6/';
 NOTE: Libref MYLIB was successfully assigned as follows: 
       Engine:        V9 
       Physical Name: /folders/myfolders/Problem Set 6
 88         
 89         /* import delimited data with proc import: ---------------------------------- */
 90         proc import
 91         datafile='/folders/myfolders/Problem Set 6/mousetrap_data.csv'
 92         out=mylib.ps2q2d
 93         replace;
 94         run;
 
 NOTE: Unable to open parameter catalog: SASUSER.PARMS.PARMS.SLIST in update mode. Temporary parameter values will be saved to 
 WORK.PARMS.PARMS.SLIST.
 95          /**********************************************************************
 96          *   PRODUCT:   SAS
 97          *   VERSION:   9.4
 98          *   CREATOR:   External File Interface
 99          *   DATE:      10DEC19
 100         *   DESC:      Generated SAS Datastep Code
 101         *   TEMPLATE SOURCE:  (None Specified.)
 102         ***********************************************************************/
 103            data MYLIB.PS2Q2D    ;
 104            %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
 105            infile '/folders/myfolders/Problem Set 6/mousetrap_data.csv' delimiter = ',' MISSOVER DSD lrecl=32767 firstobs=2 ;
 106               informat subject_nr best32. ;
 107               informat count_trial best32. ;
 108               informat tot_dist best32. ;
 109               informat max_abs_dev best32. ;
 110               informat avg_abs_dev best32. ;
 111               informat AUC best32. ;
 112               informat Condition $10. ;
 113               informat Exemplar $15. ;
 114               format subject_nr best12. ;
 115               format count_trial best12. ;
 116               format tot_dist best12. ;
 117               format max_abs_dev best12. ;
 118               format avg_abs_dev best12. ;
 119               format AUC best12. ;
 120               format Condition $10. ;
 121               format Exemplar $15. ;
 122            input
 123                        subject_nr
 124                        count_trial
 125                        tot_dist
 126                        max_abs_dev
 127                        avg_abs_dev
 128                        AUC
 129                        Condition  $
 130                        Exemplar  $
 131            ;
 132            if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
 133            run;
 
 NOTE: The infile '/folders/myfolders/Problem Set 6/mousetrap_data.csv' is:
       Filename=/folders/myfolders/Problem Set 6/mousetrap_data.csv,
       Owner Name=sasdemo,Group Name=sas,
       Access Permission=-rw-rw-r--,
       Last Modified=08Dec2019:16:37:34,
       File Size (bytes)=98674
 
 NOTE: 1064 records were read from the infile '/folders/myfolders/Problem Set 6/mousetrap_data.csv'.
       The minimum record length was 76.
       The maximum record length was 101.
 NOTE: The data set MYLIB.PS2Q2D has 1064 observations and 8 variables.
 NOTE: DATA statement used (Total process time):
       real time           0.00 seconds
       cpu time            0.01 seconds
       
 
 1064 rows created in MYLIB.PS2Q2D from /folders/myfolders/Problem Set 6/mousetrap_data.csv.
   
   
   
 NOTE: MYLIB.PS2Q2D data set was successfully created.
 NOTE: The data set MYLIB.PS2Q2D has 1064 observations and 8 variables.
 NOTE: PROCEDURE IMPORT used (Total process time):
       real time           0.06 seconds
       cpu time            0.06 seconds
       
 
 134        
 135        data mylib.ps6_q1;
 136        set mylib.ps2q2d;
 137        AUC=max(AUC, 1);
 138        tot_dist = log(tot_dist);
 139        max_abs_dev = log(max_abs_dev);
 140        avg_abs_dev = log(avg_abs_dev);
 141        AUC = log(AUC);
 142        by subject_nr count_trial;
 143        run;
 
 NOTE: There were 1064 observations read from the data set MYLIB.PS2Q2D.
 NOTE: The data set MYLIB.PS6_Q1 has 1064 observations and 8 variables.
 NOTE: DATA statement used (Total process time):
       real time           0.00 seconds
       cpu time            0.00 seconds
       
 
 144        
 145        proc format library=mylib.ps6_q1;
 146         value Condition
 147               1="Typical"
 148           2="Atypical";
 NOTE: Format CONDITION is already on the library MYLIB.PS6_Q1.
 NOTE: Format CONDITION has been written to MYLIB.PS6_Q1.
 149        run;
 
 NOTE: PROCEDURE FORMAT used (Total process time):
       real time           0.00 seconds
       cpu time            0.00 seconds
       
 
 150        
 151        /* Use Linear Mixed model fit tot_dist */
 152        ods output
 153         SolutionF = tot_dist_re;
 154        
 155        proc mixed data=mylib.ps6_q1;
 156         class Condition Exemplar;
 157         model tot_dist = Condition / cl;
 158         random intercept / subject=Exemplar;
 159         random intercept / subject=subject_nr;
 160        run;
 
 NOTE: Convergence criteria met.
 NOTE: The data set WORK.TOT_DIST_RE has 3 observations and 10 variables.
 NOTE: PROCEDURE MIXED used (Total process time):
       real time           0.12 seconds
       cpu time            0.11 seconds
       
 
 161        
 162        /* Use Linear Mixed model fit max_abs_dev */
 163        ods output
 164         SolutionF = max_abs_dev_re;
 165        
 166        proc mixed data=mylib.ps6_q1;
 167         class Condition Exemplar;
 168         model max_abs_dev = Condition / cl;
 169         random intercept / subject=Exemplar;
 170         random intercept / subject=subject_nr;
 171        run;
 
 NOTE: Convergence criteria met.
 NOTE: The data set WORK.MAX_ABS_DEV_RE has 3 observations and 10 variables.
 NOTE: PROCEDURE MIXED used (Total process time):
       real time           0.09 seconds
       cpu time            0.10 seconds
       
 
 172        
 173        /* Use Linear Mixed model fit avg_abs_dev */
 174        ods output
 175         SolutionF = avg_abs_dev_re;
 176        
 177        proc mixed data=mylib.ps6_q1;
 178         class Condition Exemplar;
 179         model avg_abs_dev = Condition / cl;
 180         random intercept / subject=Exemplar;
 181         random intercept / subject=subject_nr;
 182        run;
 
 NOTE: Convergence criteria met.
 NOTE: The data set WORK.AVG_ABS_DEV_RE has 3 observations and 10 variables.
 NOTE: PROCEDURE MIXED used (Total process time):
       real time           0.10 seconds
       cpu time            0.09 seconds
       
 
 183        
 184        /* Use Linear Mixed model fit AUC */
 185        ods output
 186         SolutionF = AUC_re;
 187        
 188        proc mixed data=mylib.ps6_q1;
 189         class Condition Exemplar;
 190         model AUC = Condition / cl;
 191         random intercept / subject=Exemplar;
 192         random intercept / subject=subject_nr;
 193        run;
 
 NOTE: Convergence criteria met.
 NOTE: The data set WORK.AUC_RE has 3 observations and 10 variables.
 NOTE: PROCEDURE MIXED used (Total process time):
       real time           0.09 seconds
       cpu time            0.09 seconds
       
 
 194        
 195        /* add label name */
 196        data name;
 197        input label$;
 198        cards;
 
 NOTE: The data set WORK.NAME has 4 observations and 1 variables.
 NOTE: DATA statement used (Total process time):
       real time           0.00 seconds
       cpu time            0.01 seconds
       
 
 203        ;
 204        run;
 205        
 206        /* collect the result for output */
 207        data est_result;
 208         set tot_dist_re max_abs_dev_re avg_abs_dev_re AUC_re;
 209         if (_n_=2)|(_n_=5)|(_n_=8)|(_n_=11);
 210         keep Estimate Lower Upper;
 211        run;
 
 NOTE: There were 3 observations read from the data set WORK.TOT_DIST_RE.
 NOTE: There were 3 observations read from the data set WORK.MAX_ABS_DEV_RE.
 NOTE: There were 3 observations read from the data set WORK.AVG_ABS_DEV_RE.
 NOTE: There were 3 observations read from the data set WORK.AUC_RE.
 NOTE: The data set WORK.EST_RESULT has 4 observations and 3 variables.
 NOTE: DATA statement used (Total process time):
       real time           0.00 seconds
       cpu time            0.00 seconds
       
 
 212        
 213        data final_result;
 214         merge name est_result;
 215         Relative_effect_est = exp(Estimate);
 216         Relative_effect_lwr = exp(Lower);
 217         Relative_effect_upr = exp(Upper);
 218        run;
 
 NOTE: There were 4 observations read from the data set WORK.NAME.
 NOTE: There were 4 observations read from the data set WORK.EST_RESULT.
 NOTE: The data set WORK.FINAL_RESULT has 4 observations and 7 variables.
 NOTE: DATA statement used (Total process time):
       real time           0.00 seconds
       cpu time            0.01 seconds
       
 
 219        
 220        /* Saving result into file PS6_q1.csv, and create the .lst file */
 221        proc export data=final_result
 222        outfile='/folders/myfolders/Problem Set 6/PS6_q1.csv' replace;
 223        run;
 
 NOTE: Unable to open parameter catalog: SASUSER.PARMS.PARMS.SLIST in update mode. Temporary parameter values will be saved to 
 WORK.PARMS.PARMS.SLIST.
 224         /**********************************************************************
 225         *   PRODUCT:   SAS
 226         *   VERSION:   9.4
 227         *   CREATOR:   External File Interface
 228         *   DATE:      10DEC19
 229         *   DESC:      Generated SAS Datastep Code
 230         *   TEMPLATE SOURCE:  (None Specified.)
 231         ***********************************************************************/
 232            data _null_;
 233            %let _EFIERR_ = 0; /* set the ERROR detection macro variable */
 234            %let _EFIREC_ = 0;     /* clear export record count macro variable */
 235            file '/folders/myfolders/Problem Set 6/PS6_q1.csv' delimiter=',' DSD DROPOVER lrecl=32767;
 236            if _n_ = 1 then        /* write column names or labels */
 237             do;
 238               put
 239                  "label"
 240               ','
 241                  "Estimate"
 242               ','
 243                  "Lower"
 244               ','
 245                  "Upper"
 246               ','
 247                  "Relative_effect_est"
 248               ','
 249                  "Relative_effect_lwr"
 250               ','
 251                  "Relative_effect_upr"
 252               ;
 253             end;
 254           set  FINAL_RESULT   end=EFIEOD;
 255               format label $8. ;
 256               format Estimate d8.4 ;
 257               format Lower d8.4 ;
 258               format Upper d8.4 ;
 259               format Relative_effect_est best12. ;
 260               format Relative_effect_lwr best12. ;
 261               format Relative_effect_upr best12. ;
 262             do;
 263               EFIOUT + 1;
 264               put label $ @;
 265               put Estimate @;
 266               put Lower @;
 267               put Upper @;
 268               put Relative_effect_est @;
 269               put Relative_effect_lwr @;
 270               put Relative_effect_upr ;
 271               ;
 272             end;
 273            if _ERROR_ then call symputx('_EFIERR_',1);  /* set ERROR detection macro variable */
 274            if EFIEOD then call symputx('_EFIREC_',EFIOUT);
 275            run;
 
 NOTE: The file '/folders/myfolders/Problem Set 6/PS6_q1.csv' is:
       Filename=/folders/myfolders/Problem Set 6/PS6_q1.csv,
       Owner Name=sasdemo,Group Name=sas,
       Access Permission=-rw-rw-r--,
       Last Modified=10Dec2019:14:55:32
 
 NOTE: 5 records were written to the file '/folders/myfolders/Problem Set 6/PS6_q1.csv'.
       The minimum record length was 63.
       The maximum record length was 86.
 NOTE: There were 4 observations read from the data set WORK.FINAL_RESULT.
 NOTE: DATA statement used (Total process time):
       real time           0.00 seconds
       cpu time            0.00 seconds
       
 
 4 records created in /folders/myfolders/Problem Set 6/PS6_q1.csv from FINAL_RESULT.
   
   
 NOTE: "/folders/myfolders/Problem Set 6/PS6_q1.csv" file was successfully created.
 NOTE: PROCEDURE EXPORT used (Total process time):
       real time           0.06 seconds
       cpu time            0.03 seconds
       
 
 276        
 277        ods listing;
 278        proc printto print='/folders/myfolders/Problem Set 6/ps6_q1.lst'
 279        new;
 280        run;
 
 NOTE: PROCEDURE PRINTTO used (Total process time):
       real time           0.00 seconds
       cpu time            0.00 seconds
       
 
 281        
 282        proc print data=final_result;
 283        title 'Final result of Question 1';
 284        run;
 
 NOTE: There were 4 observations read from the data set WORK.FINAL_RESULT.
 NOTE: The PROCEDURE PRINT printed page 1.
 NOTE: PROCEDURE PRINT used (Total process time):
       real time           0.04 seconds
       cpu time            0.04 seconds
       
 
 285        
 286        proc printto;
 287        run;
 
 NOTE: PROCEDURE PRINTTO used (Total process time):
       real time           0.00 seconds
       cpu time            0.00 seconds
       
 
 288        ods listing close;
 289        
 290        
 291        
 292        
 293        OPTIONS NONOTES NOSTIMER NOSOURCE NOSYNTAXCHECK;
 305        